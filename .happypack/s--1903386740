'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = configureStore;

var _reduxSaga = require('redux-saga');

var _reduxSaga2 = _interopRequireDefault(_reduxSaga);

var _redux = require('redux');

var _reactRouterRedux = require('react-router-redux');

var _reactRouter = require('react-router');

var _reducers = require('../reducers');

var _reducers2 = _interopRequireDefault(_reducers);

var _saga = require('../saga');

var _saga2 = _interopRequireDefault(_saga);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* eslint-env browser */
function configureStore() {
    var middlewares = [];
    var enhancers = [];

    var sagaMiddleware = (0, _reduxSaga2.default)();

    middlewares.push(sagaMiddleware, (0, _reactRouterRedux.routerMiddleware)(_reactRouter.browserHistory));
    enhancers.push(_redux.applyMiddleware.apply(undefined, middlewares));

    var composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || _redux.compose;
    var storeEnhancers = composeEnhancers.apply(undefined, enhancers);
    var store = (0, _redux.createStore)(_reducers2.default, storeEnhancers);

    if (module.hot) {
        module.hot.accept('../reducers/', function () {
            var nextRootReducer = require('../reducers/index').default;

            store.replaceReducer(nextRootReducer);
        });
    }

    sagaMiddleware.run(_saga2.default);

    return store;
}